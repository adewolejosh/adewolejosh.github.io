<!doctype html>
<html data-n-head-ssr>
  <head>
    <meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="images/favicon.ico"><link data-n-head="ssr" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css"><link data-n-head="ssr" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"><link data-n-head="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat"><link data-n-head="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Playfair+Display"><link data-n-head="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lora:ital@1&display=swap"><link data-n-head="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Libre+Franklin:wght@200&display=swap"><link data-n-head="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&amp;amp;display=swap"><script data-n-head="ssr" charset="utf-8" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"></script><link rel="preload" href="/_nuxt/cd18362.js" as="script"><link rel="preload" href="/_nuxt/2e7e6df.js" as="script"><link rel="preload" href="/_nuxt/2a1155f.js" as="script"><link rel="preload" href="/_nuxt/1812f56.js" as="script"><link rel="preload" href="/_nuxt/423aafa.js" as="script"><style data-vue-ssr-id="15f0552d:0 fc63198e:0 63074aa9:0">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:0 0;color:#000;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;text-align:left;text-shadow:0 1px #fff;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{background:#b3d4fc;text-shadow:none}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#b3d4fc;text-shadow:none}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{background:hsla(0,0%,100%,.5);color:#9a6e3a}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.nuxt-progress{background-color:#000;height:2px;left:0;opacity:1;position:fixed;right:0;top:0;transition:width .1s,opacity .4s;width:0;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}.post-title{font-family:Lora,serif;font-weight:600}.post-date{font-family:Montserrat,sans-serif;font-style:italic}.post-quote{font-family:Libre Franklin;font-size:.9rem;font-style:italic}#post-img{pointer-events:none}.post-ref{font-family:Libre Franklin;font-size:.9rem}.nuxt-content h3{font-family:Playfair Display;margin-top:2rem}.nuxt-content p{font-family:Libre Franklin,sans-serif;text-align:justify;text-justify:inter-word}h7{font-size:.8rem}.nuxt-content blockquote{background:#f9f9f9;border-left:5px solid #ccc;margin:1.5em 10px;padding:.5em 20px;quotes:"\201C""\201D""\2018""\2019"}.nuxt-content blockquote:before{color:#ccc;font-size:4em;line-height:.1em;margin-right:.25em;vertical-align:-.4em}.nuxt-content blockquote p{display:inline;font-family:Roboto;font-weight:300;text-align:justify}.nuxt-content code{font-size:14px}</style><link rel="preload" href="/_nuxt/static/1744151211/blog/django-querying-the-faster-way/state.js" as="script"><link rel="preload" href="/_nuxt/static/1744151211/blog/django-querying-the-faster-way/payload.js" as="script"><link rel="preload" href="/_nuxt/static/1744151211/manifest.js" as="script">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div><title>Django querying the faster way</title> <div class="row row-cols-1 row-cols-md-3 m-5"><div class="col-md-2"></div> <div class="col-md-8"><a href="/blog" class="nuxt-link-active"><i class="fas fa-arrow-circle-left fa-2x text-dark"></i></a> <div class="mt-5"><div class="mt-5 mb-2"><h3 class="post-title font-weight-bold text-capitalize">Django querying the faster way</h3> <h6 class="post-date">Sep. 10, 2023</h6> <div class="mt-3"><h7>2 min read</h7></div> <div class="mt-3"><button class="btn btn-sm btn-outline-dark rounded-pill">
                            django
                        </button><button class="btn btn-sm btn-outline-dark rounded-pill">
                            big-data
                        </button><button class="btn btn-sm btn-outline-dark rounded-pill">
                            querying
                        </button><button class="btn btn-sm btn-outline-dark rounded-pill">
                            suggestive
                        </button><button class="btn btn-sm btn-outline-dark rounded-pill">
                            continuous
                        </button></div></div> <hr> <img src="/_nuxt/img/django-querying-the-fast-way.60e98d2.jpg" alt="django querying" id="post-img" class="d-flex mx-auto mt-5 mb-5 img-fluid"> <div><p class="font-weight-lighter post-quote me-3 ms-3 text-center">"Have you ever ran into issues whilst trying to query a large amount of data in django? Well, I have also, but the following article(a continuous reiterative process, will update from t2t) are approaches I have practically taking to optimize my queries. This article is also dedicated to all my django bosses who have helped shaped my knowledge on it... Due to so many reasons this will be an explanation with code show, not necessarily a time efficiency comparison article."</p> <p class="font-weight-lighter post-ref text-center">Photo by Dušan veverkolog on Unsplash: I loved the Irony lol</p></div> <div class="text-justify ignore-css nuxt-content"><h3 id="intro"><a aria-hidden="true" href="#intro" tabindex="-1"><span class="icon icon-link"></span></a>Intro</h3>
<hr>
<p>This is a somewhat technical writing; for a while now I have worked on some python project(s) (mostly using Django and DRF - django rest framework) extensively with a relatively or considerably large amount of data, and on some occasions I've had to work on filters, querysets: sorting and returning data to be consumed, as optimally as possible. This article will be covering some of the things I figured as well as learnt whilst trying to achieve an efficient solution. edited Oct.30 (honestly need to start this already, said will publish at Sept 10 but this is already that, crazy) . Edited again in Nov. 22 :( , deploying thit time abeg!!!</p>
<h3 id="dig"><a aria-hidden="true" href="#dig" tabindex="-1"><span class="icon icon-link"></span></a>Dig</h3>
<hr>
<p>Avoid using .order_by() as much as possible, this definitely had to come to mind first, crazy but true talk. Django filter provided this method for use when filtering, just in case you wanted to sort it by whatever field. Unfortunately when used on a data of over 100k rows (approximately 100 columns), it
brought about a great lag; An alternative is, get the records, or simply use the .filter() and use python's .sorted() to do that. Although, I didn't compare what happens with more data, I mean, what are the odds- it is better in a longer time or sumn. Well, that's our first: python's .sorted() over django .order_by().</p>
<p>You probably know this if you've used django for long: using .values() and .values_list() (with sometimes .values_list(Flat=True) to flatten the result) this helps in resolving your filtered data into a dictionary and array/list respectively and reducing the amount of data being returned, instead of retrieving every data in every column of every row, you use this to instantly select/pick the columns you need from every row. In some ways this make your querying faster although the trade-off I see is, being expected to manage the columns you need manually I guess. Having to input that I want this and that field and all that.</p>
<p>Using managers properly, well, using managers in django as helpers for filters or worse filters, has some way of keeping your codes neater, giving you more freedom and flexibity to write frequently called filters.</p></div> <hr class="mt-5"> <div class="footer-copyright text-center">© (20)21-25 Copyright:
                    <a target="_blank" href="mailto:adewole.josh@gmail.com" class="text-dark text-decoration-none">Joshua Adewole</a> <a target="_blank" href="https://github.com/adewolejosh" class="text-dark text-decoration-none">(adewolejosh)</a></div> <div class="text-center"><a href="https://github.com/adewolejosh/" target="_blank"><i class="fab fa-github text-dark"></i></a> <a href="https://twitter.com/adewole_josh/" target="_blank"><i class="fab fa-twitter p-3 text-dark"></i></a> <a href="https://www.linkedin.com/in/joshua-adewole/" target="_blank"><i class="fab fa-linkedin-in text-dark"></i></a></div></div></div> <div class="col-md-2"></div></div></div></div></div><script defer src="/_nuxt/static/1744151211/blog/django-querying-the-faster-way/state.js"></script><script src="/_nuxt/cd18362.js" defer></script><script src="/_nuxt/423aafa.js" defer></script><script src="/_nuxt/2e7e6df.js" defer></script><script src="/_nuxt/2a1155f.js" defer></script><script src="/_nuxt/1812f56.js" defer></script>
  </body>
</html>
